{% extends 'main/base_emp.html'%}


{% block content %}

<!-- Breadcumbs -->
<div class="mb-8">
    <nav class="flex" aria-label="Breadcrumb">
    <ol class="inline-flex items-center space-x-1 md:space-x-2 rtl:space-x-reverse">
        <li>
        <div class="flex items-center">
            <a href="{% url 'main:stock_entries_view' %}" class="ms-1 text-sm font-medium text-gray-700 hover:text-[--jaffa-90] md:ms-2">Stock Entries</a>
        </div>
        </li>
        <li aria-current="page">
        <div class="flex items-center">
            <svg class="rtl:rotate-180 w-3 h-3 text-gray-400 mx-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 9 4-4-4-4"/>
            </svg>
            <span class="ms-1 text-sm font-medium text-gray-500 md:ms-2">Withdraw Stock Entry</span>
        </div>
        </li>
    </ol>
    </nav>
</div>

<!-- Informations -->
<div class="max-w-sm mx-auto" >
    <div class="mb-5">
        <label class="block mb-2 text-sm font-medium text-gray-900">Product</label>
        <label class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg block w-full p-2.5">{{stock_entry.product.name}}</label>
    </div>
    <div class="mb-5">
        <label class="block mb-2 text-sm font-medium text-gray-900">Supplier</label>
        <label class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg block w-full p-2.5">{{stock_entry.supplier.name}}</label>
    </div>
    <div class="mb-5 grid md:grid-cols-3 md:gap-6">
        <div>
            <label class="block mb-2 text-sm font-medium text-gray-900">Current Quantity</label>
            <label class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg block w-full p-2.5">{{stock_entry.quantity}}</label>
        </div>
        <div>
            <label class="block mb-2 text-sm font-medium text-gray-900">Initial Quantity</label>
            <label class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg block w-full p-2.5">{{stock_entry.initial_quantity}}</label>
        </div>
        <div>
            <label for="unit_cost" class="block mb-2 text-sm font-medium text-gray-900">Unit cost</label>
            <div class="flex flex-row">
                <label class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg block w-full p-2.5">{{stock_entry.unit_cost}}</label>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1124.14 1256.39" class="self-center mx-2 w-6 h-6 text-gray-700" role="img" aria-label="logo">
                    <path fill="currentColor" d="M699.62,1113.02h0c-20.06,44.48-33.32,92.75-38.4,143.37l424.51-90.24c20.06-44.47,33.31-92.75,38.4-143.37l-424.51,90.24Z"/>
                    <path fill="currentColor" d="M1085.73,895.8c20.06-44.47,33.32-92.75,38.4-143.37l-330.68,70.33v-135.2l292.27-62.11c20.06-44.47,33.32-92.75,38.4-143.37l-330.68,70.27V66.13c-50.67,28.45-95.67,66.32-132.25,110.99v403.35l-132.25,28.11V0c-50.67,28.44-95.67,66.32-132.25,110.99v525.69l-295.91,62.88c-20.06,44.47-33.33,92.75-38.42,143.37l334.33-71.05v170.26l-358.3,76.14c-20.06,44.47-33.32,92.75-38.4,143.37l375.04-79.7c30.53-6.35,56.77-24.4,73.83-49.24l68.78-101.97v-.02c7.14-10.55,11.3-23.27,11.3-36.97v-149.98l132.25-28.11v270.4l424.53-90.28Z"/>
                </svg>
            </div>
        </div>
    </div>
    <div class="mb-5">
        <label for="received_at" class="block mb-2 text-sm font-medium text-gray-900">Received At</label>
        <label class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg block w-full p-2.5">{{stock_entry.received_at}}</label>
    </div>
    <div class="mb-5">
        <label for="received_at" class="block mb-2 text-sm font-medium text-gray-900">Expiry Date</label>
        <label class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg block w-full p-2.5">{{stock_entry.expiry_date}}</label>
    </div>

    <div class="mb-5">
        <label for="name" class="block mb-2 text-sm font-medium text-gray-900">Description</label>
        <label class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg block w-full p-2.5">{% if stock_entry.description == ""  %} (No Description) {% else %} {{stock_entry.description}} {% endif %}</label>
    </div>
</div>

    <!-- Form -->
<!-- Form -->
<form class="max-w-sm mx-auto" action="{% url 'main:withdraw_stock_entry' stock_entry.id %}" method="post">
    {% csrf_token %}

    <!-- Quantity -->
    <div class="mb-5">
        <label for="quantity" class="block mb-2 text-sm font-medium text-gray-900">Quantity to Withdraw</label>
        <input type="number" name="quantity" id="quantity" min="1" max="{{ stock_entry.quantity }}"
               class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-[--jaffa-30] focus:border-[--jaffa-90] block w-full p-2.5"
               placeholder="Enter quantity" required>
    </div>

    <!-- Reason -->
    <div class="mb-5">
        <label for="reason" class="block mb-2 text-sm font-medium text-gray-900">Reason</label>
        <select name="reason" id="reason"
                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-[--jaffa-30] focus:border-[--jaffa-90] block w-full p-2.5">
            <option value="SALE">Sale</option>
            <option value="DAMAGE">Damage</option>
            <option value="RETURN">Return to supplier</option>
            <option value="ADJUST">Inventory adjust</option>
            <option value="OTHER">Other</option>
        </select>
    </div>

    <!-- Note -->
    <div class="mb-5">
        <label for="note" class="block mb-2 text-sm font-medium text-gray-900">Note (optional)</label>
        <textarea name="note" id="note" rows="2"
                  class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-[--jaffa-30] focus:border-[--jaffa-90] block w-full p-2.5"
                  placeholder="Add any notes if needed"></textarea>
    </div>

    <button type="submit"
            class="text-white bg-[--jaffa-90] hover:bg-[--jaffa-300] focus:ring-4 focus:outline-none focus:ring-[--jaffa-30] font-medium rounded-lg text-sm px-5 py-2.5 text-center">
        Withdraw Stock
    </button>
</form>
{% endblock %}